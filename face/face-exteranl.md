#### Ⅰ.基本面试题
1.k8s与docker的关系?
> docker构建容器，k8s编排/管理docker，使各容器相互通信。

2.什么是谷歌容器引擎?
> Google Container Engine(GKE)是docker容器和集群的开源管理平台；此基于k8s的引擎仅支持在google的公共云服务中运行的集群。

3.什么是heapster?
> heapster是由每个节点上运行的kubelet提供的集群范围的数据聚合器，此容器管理工具在k8s集群上本机支持，并作为pod运行，就像集群中的任何pod一样；因此，它基本上发现集群中的所有节点，并通过机上k8s代理查询集群中k8s节点的使用信息。

4.什么是minikube?
> minikube是一种工具，可以在本地轻松运行k8s(单节点)。

5.什么是kubectl?
> kubectl是一个平台，可以使用该平台将命令传递给集群；基本上为cli提供了针对k8s集群运行命令的方法，以及创建和管理k8s组件的各种方法。

6.什么是kubelet?
> kubelet是一个代理服务，在每个节点上运行，并使从服务器与主服务器通信，故，kubelet处理PodSpec提供给它的容器的描述，并确保PodSpec描述的容器运行正常。

7.k8s是什么?
> k8s是一个可移植及开源的容器编排工具，用于自动执行管理，监控，容器扩缩容，负载均衡和部署容器化的多容器管理解决方案。

8.k8s的节点和pod有什么区别?
> 节点是计算机，pod是运行于其中的东西；      
> a.节点是工作计算机，可以是虚拟机，也可以是物理机，该节点包含用于运行容器的服务，包括:kubelet,kube-proxy等；      
> b.pod是k8s可以创建和管理的最小部署单元，具有共享网络和存储。        

9.kubectl是什么?       
> kubectl是k8s的命令行界面，可以从该界面获取并设置任何内容，从收集日志和事件到编辑部署环境和机密文件。

10.命名空间是什么?
> 命名空间是pod中的虚拟集群，这种抽象可以使你将虚拟集群保留在多个环境中，以此来进行隔离。     

11.容器是什么?
> 1.精简的操作系统；    
> 2.在受限的操作系统环境中运行的应用程序。     

12.容器和主机部署应用的区别是什么?
> 容器的中心思想是秒级启动；一次封装，到处运行；可以将各个服务进行隔离，互不影响；这些都是主机部署无法达到的效果。      

13.集群如何预防雪崩，简要写出必要的集群优化措施
> a.为每个pod设置资源限制；   
> b.设置kubelet资源预留。      

#### Ⅱ.基于k8s架构问题
1.k8s的结构不同组件有哪些?
> 如k8s结构图所示，k8s架构主要有两个组件:master和worker几点。

2.对kube-proxy的了解?
> kube-proxy可以在每个节点上运行，并且可以跨后端网络服务进行简单的TOP/UDP数据包转发；基本上，它是一个网络代理，反映了每个节点上k8s api中配置的服务。故，docker可链接的兼容环境变量提供由代理打开的集群IP和端口。       

3.介绍k8s中主节点的工作情况?
> k8s master控制容器存在的节点和节点内部；单独的容器包含在容器内部和每个容器内部，可以根据配置和要求拥有不同数量的容器。kube-apiserver确保在k8s节点和主组件之间简历通信。

4.kube-apiserver和kube-scheduler的作用是什么?
> kube-apiserver遵循横向扩展框架，是主节点控制面板的前端，将公开k8s主节点组件的所有API，并负责在k8s节点和k8s主组件之间建立通信；      
> kube-scheduler负责工作节点上工作负载的分配和管理；根据资源需求选择最合适的节点来运行未调度的pod，并跟踪资源利用率，确保不再已满的节点上调度工作负载。       

5.介绍k8s控制管理器?
> 多个控制器进程在主节点上运行，但是一起编译为单个进程运行，即k8s控制管理器。Controller Manager是一个嵌入控制器并执行命名空间创建和垃圾收集的守护程序；拥有责任并于API服务器通信以管理端点。     
> 如controller manager图所示        

6.什么是etcd?
> etcd是用go编程语言编写，是一个分布式键值存储，用于协调分布式工作；etcd存储k8s集群的配置数据，表示在任何给定时间点的集群状态。     

7.k8s有哪些不同类型的服务?
> 1)clusterIP;      
> 2)NodePort;
> 3)LoadBalance;
> 4)ExternalName。       

8.对k8s负载均衡器的了解?
> 负载均衡器是暴露服务的最常见和标准方式之一；根据工作环境使用两种类型的负载均衡器，即内部负载均衡器或外部负载均衡器；内部负载均衡器自动平衡负载并使用所需配置分配容器，而外部负载均衡器将流量从外部负载引导至后端容器。       

9.什么是ingress网络及其如何工作?
> ingress网络是一组规则，充当k8s集群的入口点，允许入站连接，可以将其配置为通过可访问的url；负载平衡流量或通过提供基于名称的虚拟主机从外部提供服务；故，ingress是API对象，通常通过http挂历集群中服务的外部访问，是暴露服务的最有效方式。
> 详见ingress-connect图，解释说明工作流:
```
前言:有2个节点具有带linux桥接器的pod和根网络命名空间，及flannel0(网络插件)的新虚拟以太网设备被添加到根网络中      
目的:数据包从pod1流向pod4
流程：
a.数据包从pod1的网络保留在eth0,并进入veth0的根网络；
b.再传递给cbr0，这使得arp请求找到目的地，并且发现该节点上没有目的地ip地址；
c.桥接器会将数据包发送到flannel0;
d.flannel守护进程与k8s的api服务通信，以了解所有podIP及其各自的节点，以创建podsIP到节点IP的映射；
e.网络插件将此数据包封装再udp数据包中，其中额外的表头将源目标ip更为各自的节点，并通过eth0发送此数据包；
f.路由表已知道如何再节点之间路由流量，它将数据包发送到node2;
g.数据包到达node2的eth0并返回到flannel0以解封装，并在根网络命名空间中将其返回；
h.数据包被转发送linux网桥以发出arp请求以找出属于veth1的IP;
i.数据包最终穿过根网络并到达目标pod4。
```

10.container资源监控工具有哪些?
> 1.grafana;        
> 2.heapster;       
> 3.cadvisor;       
> 4.influxdb;       
> 5.promitheus。     

11.replica set和replication controller之间有什么区别?
> 几乎完全相同，都确保在任何给定时间允许指定数量的pod副本；    
> 不同之处在于复制pod使用的选择器，replica set使用基于集合的选择器，而replication controller使用基于权限的选择器。        

12.什么是headless service?
> 其类似于"普通"服务，但没有集群ip;此服务使可以直接访问pod，而无需使用代理访问它。      

13.什么是集群联邦?
> 在集群联邦的帮助下，可以将多个k8s集群作为单个集群进行管理；故，可以在数据中心/云中创建多个k8s集群，并使用联邦在一个位置控制/管理它们。       
> 集群联邦可以通过如下两种方式实现:
```
a.cross cluster discovery
b.sync resources across clusters
```
如图:集群联邦，所示

Ⅲ.基于场景的问题
1.前提:假设一家基于单一架构的公司处理众多产品。如今随着公司在当今的形势下，需要扩展业务，现单一架构开始引发问题。
问:你是如何看待公司从单一服务转向微服务，并部署其服务容器?
> 由于公司的目标是从单一应用程序转向微服务，可以逐一构建，也可以并行构建，只需在后台切换配置。然后可以将这些内置为服务放在k8s平台上；可以从一次或两次迁移服务开始，并监控它们，以切保一切运行稳定。        

...

#### Ⅳ.多项选择面试题
1.k8s集群中的minions:
> minions是集群的工作节点。          

2.k9s集群数据存储在
> etcd。     

3.k8s控制有如下:
> replicaSet;   
> deployment.   

4.k8s的核心对象:
> pods;     
> services;     
> volumes;      

5.k8s network代理运行在:
> master node;      
> worker node.      

6.节点控制器的职责:
> 将cidr块分配给节点；      
> 位列节点列表；       
> 监听节点的运行状况。        

7.replication controller的职责:
> 使用单个命令更新或者删除多个pod;        
> 有助于达到理想状态；        
> 如果现有pod崩溃，则创建新pod.        
 
8.如何在没有选择器的情况下定义服务?
> 指定外部名称
        
9.1.8版本的k8s引入了:
> taints and tolerations        

10.kubelet调用的处理检查容器的ip地址是否打开的程序是:
> TCPSocketAction       

#### 面试题来源网站如下:
> https://www.kubernetes.org.cn/5578.html            
> https://blog.51cto.com/14154700/2452179           
> https://blog.csdn.net/huakai_sun/article/details/82378856         
> https://www.cnblogs.com/uglyliu/p/11743021.html       
>   